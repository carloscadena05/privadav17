<div class="card bg-primary">
  <div class="card-header text-white"
    data-cy="selectedGradYear">
    <span style="font-size: large"> Titulos Tracking</span>
    <span style="margin-left: 10rem">
      Grad Year:
      <select
        name="activeGradYearSelector"
        data-cy="period-selector"
        [(ngModel)]="selectedGradYear"
        (change)="setselectedGradYear($event.target.value)"
      >
        <option *ngFor="let year of years" [value]="year.value">{{year.label}}</option>
      </select>
    </span>
  </div>
  <div class="card-body bg-white">
    <span *ngIf="errorMessage" class="alert alert-danger">{{ errorMessage }}</span>
    <span *ngIf="successMessage" class="alert alert-success">{{ successMessage }}</span>

    <div [ngSwitch]="isLoading">
      <div *ngSwitchCase="true" class="text-center col-md-4 col-md-offset-4">
        <app-loading-container> </app-loading-container>
      </div>
      <div *ngSwitchCase="false">
        <table class="table-sm table-striped">
          <table class="table-sm table-striped">
            <thead>
              <tr>
                <!-- <td>Id</td> -->
                <th></th>
                <th app-sortable-column="studentName" sort-direction="asc" (onSortColumn)="onSortColumn($event)">
                  Student
                </th>
                <th>Upload<br />Image</th>
                <!-- <th app-sortable-column="tituloReceivedDate" (onSortColumn)="onSortColumn($event)">Received <br />Date</th> -->
                <th app-sortable-column="imageSubmittedDate" (onSortColumn)="onSortColumn($event)">Uploaded <br />Date</th>
                <th>View<br />Image</th>
               </tr>
            </thead>
            <tbody>
              <tr *ngFor="let entry of titulosReceivedDTOs; let i = index">
                <td>
                  {{ i + 1 }}
                </td>
                <td (click)="gotoStudent(entry.studentGUId, entry.studentName)" class="link">
                  {{ entry.studentName }}
                </td>

                <td>
                  <span *ngIf="2147==2147 " class="padded">
                    <span class="btn btn-primary" (click)="submitImage(entry.studentGUId, entry.gradYear)" >
                      ^
                    </span>
                  </span>
                </td>
                <!-- <td>
                  {{ entry.tituloReceivedDate | truncateDate }}
                </td> -->
                <td>
                  {{ entry.imageSubmittedDate | truncateDate }}
                </td>
                <td class="link">
                  <div [hidden]="isViewLinkHidden(entry!.imageSubmittedDate)">
                    <a href= "{{staticUrlPrefix}}StudentTitulosImages/{{entry.gradYear}}/{{entry.studentGUId | uppercase }}.png"
                    target="_blank">{{entry.studentGUId | trimGuid | uppercase  }}</a>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </table>
      </div>
    </div>
  </div>
</div>
