<div class="card bg-primary" style="min-width: 46em">
  <div class="card-header text-white" style="font-size: large">Añadir Nuevo Reporte</div>
  <div class="card-body bg-white" style="min-width: 46em">
    <div *ngIf="errorMessage" class="alert alert-danger">{{ errorMessage }}</div>
    <div *ngIf="successMessage" class="alert alert-success">{{ successMessage }}</div>

    <form [formGroup]="myForm">
      <fieldset [disabled]="submitted">
        <div class="form-group">
          <div class="controls">
            <label for="reportYear"> Año/Periodo de este reporte</label>
            <select formControlName="reportYear" [(ngModel)]="selfReport.reportYear">
              <option *ngFor="let year of periodYears" [value]="year.value">{{ year.label }}</option>
            </select>

            <select formControlName="reportPeriod" [(ngModel)]="selfReport.reportPeriod">
              <option *ngFor="let month of periodMonths" [value]="month.value">{{ month.label }}</option>
            </select>
          </div>
          <!-- <span *ngIf="!reportPeriod.valid &amp;&amp; reportPeriod.touched" class="red"> Month is required</span> -->
        </div>
        <pre style="font-size: 120%">

          Después de un año en Pandemia:

          1. ¿Qué cambios hubo en tu vida?¿A que se enfrentaron tu familia y tu?
          2. ¿Qué te sigue costando trabajo sobrellevar? ¿Qué habilidades notas
                 que te hacen falta para seguir haciendo frente a la escuela en línea?
          3. ¿Qué es lo que más te preocupa en estos momentos?¿Cómo te sientes?
                 ¿Cómo te ha ido con el estrés en estos tiempos?
          4. Si pudieras elegir un buen recuerdo, una buena experiencia o un buen
                 aprendizaje de este año de Pandemia ¿Cuál sería el mejor recuerdo?
          </pre>
        <textarea
          id="narrative_English"
          #success
          formControlName="narrative_English"
          #narrative_English
          [(ngModel)]="selfReport.narrative_English"
          type="text"
          class="form-control input-sm narrative"
          placeholder=""
        >
        </textarea>
        <span class="form-text text-muted"
          ><code>{{ narrative_English.value.length }}</code> of <code>4500</code> characters</span
        >

        <app-display-errors
          control="narrative_English"
          class="red"
          [errors]="{
            required: 'An entry is required, even if it is just N/A',
            maxlength: 'Entrada no puede exceder los 4500 caracteres.'
          }"
        ></app-display-errors>

        <div class="col-md-6 col-md-offset-1">
          <span>
            <button
              class="btn btn-primary"
              style="width: 90px; margin-right: 10px; margin-top: 5px"
              (click)="onSubmit()"
            >
              Guardar
            </button> </span
          >&nbsp;
          <span>
            <button class="btn btn-default" style="width: 90px; margin-top: 5px" (click)="onCancel()">Cancelar</button>
            <div class="red" [hidden]="myForm.valid">
              Año, Periodo, y texto de reporte deben ser completados correctamente y no más de 4500 caracteres antes de
              guardar.
            </div>
          </span>
        </div>
      </fieldset>
    </form>
  </div>
</div>
