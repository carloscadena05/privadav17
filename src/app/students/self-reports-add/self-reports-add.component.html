<div>
<p class="titulo">Agregar Reporte</p>
<div *ngIf="errorMessage" class="alert alert-danger">{{ errorMessage }}</div>
    <div *ngIf="successMessage" class="alert alert-success">{{ successMessage }}</div>
    
<div class="subtitulo">
  Periodo: <b>{{ selfReport.reportPeriod }} - {{ selfReport.reportYear }}</b>
</div>

<div class="mt-4 mb-2">
  <div class="border border-dark rounded-lg padding-1 bg-white m-sm-4 m-2  p-sm-4 p-2">
    REDACTA A MANERA DE ENSAYO LAS RESPUESTAS A ESTAS PREGUNTAS:
    <br />
    1. ¿Qué es lo que más te gusta de ti?
    <br />
    2. ¿Qué sería para ti tener éxito en tu vida?
    <br />
    3. ¿Cuál es la actividad para la que necesitas esforzarte más?
    <br />
    4. ¿Por qué necesitas esforzarte más en esta actividad? ¿De qué manera impacta tu vida?
    <br />
    5. En este primer cuatrimestre del año ¿Qué obstáculos económicos, académicos, familiares o emocionales se te han
    presentado?
    <br />
    6. ¿Cómo lo resolviste o cómo se están resolviendo?
    <br />
    7. Hablando de ti ¿De qué te sientes orgulloso?
  </div>
</div>
<form [formGroup]="myForm">
  <div
    class="rounded-lg m-sm-4 m-2 cuadroTexto"
    [ngClass]="myForm.controls['narrative_English'].errors?.required && myForm.controls['narrative_English'].touched  ?  'bordeRojo' :
        myForm.controls['narrative_English'].valid && (myForm.controls['narrative_English'].dirty || myForm.controls['narrative_English'].value.length > 0) ? 'bordeVerde' : 'bordeAzul' "
  >
    <textarea
      id="narrative_English"
      #success
      formControlName="narrative_English"
      #narrative_English
      type="text"
      required
      class="areatexto p-sm-4 p-2"
      maxlength="4500"
      placeholder="Ingresa año, periodo y el texto del reporte con un máximo de 4500 caracteres"
      ></textarea>
      
    <div class="conteoCaracteres bold text-right mr-4" *ngIf="myForm.controls['narrative_English'].value != null && myForm.controls['narrative_English'].value.length > 0">
      {{4500 - myForm.controls['narrative_English'].value.length}} caracteres disponibles
    </div>

   

    <div
      class="pl-4 textoError"
      *ngIf="myForm.controls['narrative_English'].errors?.required && myForm.controls['narrative_English'].touched">
      No se puede registrar un reporte vacío
    </div>

              <app-display-errors
            control="narrative_English"
            class="red"
            [errors]="{
              required: 'An entry is required, even if it is just N/A',
              maxlength: 'Entrada no puede exceder los 4500 caracteres.'
            }"
          ></app-display-errors>


  <div class="text-center p-2">
    <button class="btn btnGuardar text-white rounded " (click)="onSubmit()"
    [disabled]="myForm.controls['narrative_English'].errors?.required || myForm.controls['narrative_English'].value == null ">
      Guardar
    </button>
    <button class="btn btnCancelar text-white rounded" (click)="onCancel()">
      Cancelar
    </button>
  </div>



  </div>
</form>
</div>
<!--
<div class="card bg-primary" style="min-width: 46em">
  <div class="card-header text-white" style="font-size: large">Añadir Nuevo Reporte</div>
  <div class="card-body bg-white" style="min-width: 46em">
    <div *ngIf="errorMessage" class="alert alert-danger">{{ errorMessage }}</div>
    <div *ngIf="successMessage" class="alert alert-success">{{ successMessage }}</div>
    <div class="form-group">
      <form [formGroup]="myForm">
        <fieldset>
          <pre style="font-size: 120%">
          REDACTA A MANERA DE ENSAYO LAS RESPUESTAS A ESTAS PREGUNTAS:

          1.	¿Qué es lo que más te gusta de ti?

          2.	¿Qué sería para ti tener éxito en tu vida?

          3.	¿Cuál es la actividad para la que necesitas esforzarte más?

          4.	¿Por qué necesitas esforzarte más en esta actividad? ¿De qué manera impacta
              tu vida?

          5.	En este primer cuatrimestre del año ¿Qué obstáculos económicos, académicos,
              familiares o emocionales se te han presentado?

          6.	¿Cómo lo resolviste o cómo se están resolviendo?

          7.	Hablando de ti ¿De qué te sientes orgulloso?
        </pre
          >

          <textarea
            id="narrative_English"
            #success
            formControlName="narrative_English"
            #narrative_English
            type="text"
            class="form-control input-sm narrative"
            placeholder=""
          >
          </textarea>
          <span class="form-text text-muted"
            ><code>{{ narrative_English.value.length }}</code> of <code>4500</code> characters</span
          >

          <app-display-errors
            control="narrative_English"
            class="red"
            [errors]="{
              required: 'An entry is required, even if it is just N/A',
              maxlength: 'Entrada no puede exceder los 4500 caracteres.'
            }"
          ></app-display-errors>

          <div class="col-md-6 col-md-offset-1">
            <span>
              <button
                class="btn btn-primary"
                style="width: 90px; margin-right: 10px; margin-top: 5px"
                (click)="onSubmit()"
              >
                Guardar
              </button> </span
            >&nbsp;
            <span>
              <button class="btn btn-default" style="width: 90px; margin-top: 5px" (click)="onCancel()">
                Cancelar
              </button>
              <div class="red" [hidden]="myForm.valid">
                Año, Periodo, y texto de reporte deben ser completados correctamente y no más de 4500 caracteres antes
                de guardar.
              </div>
            </span>
          </div>
        </fieldset>
      </form>
    </div>
  </div>
</div>
-->